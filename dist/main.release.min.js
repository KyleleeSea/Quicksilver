"use strict";const t=Math.PI,i=t=>t<0?-t:t,s=(t,i)=>t<i?t:i,e=(t,i)=>t>i?t:i,n=t=>t<0?-1:1,h=(t,i=0,s=1)=>t<i?i:t>s?s:t,o=(t,i=0,s=1)=>s-i?h((t-i)/(s-i)):0,r=(t,i=0,s=1)=>i+h(t)*(s-i),c=(t,s,e,n)=>2*i(t.x-e.x)<s.x+n.x&2*i(t.y-e.y)<s.y+n.y,u=(t=1,i=0)=>i+(t-i)*Math.random(),l=(t=1,i=0)=>0|u(t,i),a=(i=1)=>(new w).t(u(2*t),i),f=(t=new p,i=new p(0,0,0,1),s)=>s?t.i(i,u()):new p(u(t.r,i.r),u(t.g,i.g),u(t.b,i.b),u(t.a,i.a)),d=(t=0,i)=>null==t.x?new w(t,null==i?t:i):new w(t.x,t.y);class w{constructor(t=0,i=0){this.x=t,this.y=i}h(){return new w(this.x,this.y)}add(t){return new w(this.x+t.x,this.y+t.y)}o(t){return new w(this.x-t.x,this.y-t.y)}multiply(t){return new w(this.x*t.x,this.y*t.y)}u(t){return new w(this.x/t.x,this.y/t.y)}scale(t){return new w(this.x*t,this.y*t)}length(){return this.l()**.5}l(){return this.x**2+this.y**2}p(t){return this.m(t)**.5}m(t){return(this.x-t.x)**2+(this.y-t.y)**2}normalize(t=1){const i=this.length();return i?this.scale(t/i):new w(0,t)}S(t=1){const i=this.length();return i>t?this.scale(t/i):this}v(t){return this.x*t.x+this.y*t.y}angle(){return Math.atan2(this.x,this.y)}t(t=0,i=1){return this.x=i*Math.sin(t),this.y=i*Math.cos(t),this}rotate(t){const i=Math.cos(t),s=Math.sin(t);return new w(this.x*i-this.y*s,this.x*s+this.y*i)}direction(){return i(this.x)>i(this.y)?this.x<0?3:1:this.y<0?2:0}M(){return new w(this.y,-this.x)}floor(){return new w(Math.floor(this.x),Math.floor(this.y))}k(){return i(this.x*this.y)}i(t,i){return this.add(t.o(this).scale(h(i)))}B(t){return this.x>=0&&this.y>=0&&this.x<t.x&&this.y<t.y}}class p{constructor(t=1,i=1,s=1,e=1){this.r=t,this.g=i,this.b=s,this.a=e}h(){return new p(this.r,this.g,this.b,this.a)}add(t){return new p(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)}o(t){return new p(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}scale(t,i=t){return new p(this.r*t,this.g*t,this.b*t,this.a*i)}i(t,i){return this.add(t.o(this).scale(h(i)))}toString(){return`rgb(${255*this.r|0},${255*this.g|0},${255*this.b|0},${this.a})`}T(){return(255*this.r|0)+(255*this.g<<8)+(255*this.b<<16)+(255*this.a<<24)}R(){const t=t=>((t=255*t|0)<16?"0":"")+t.toString(16);return"#"+t(this.r)+t(this.g)+t(this.b)}}let g=d(1920,1200),m=d(),S="arial",b=d(16),v=d(1),y=d(),M=e(b.x,b.y);const z=1/60;let x,k,B=[],T=[],R=0,A=0,C=0,I=0;const W="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)";function $(){T=B.filter(t=>t.A);const t=i=>{if(!i.C){i.update();for(const s of i.children)t(s)}};for(const i of B)i.parent||t(i);B=B.filter(t=>!t.C),A=++R/60}function E(){for(const t of B)t.parent||t.destroy();B=B.filter(t=>!t.C)}class D{constructor(t=d(),i=v,s=-1,e=b,n=0,h,o=0){this.I=t.h(),this.size=i,this.W=s,this.$=e,this.angle=n,this.color=h,this.D=1,this.O=.99,this.L=.99,this.Y=0,this.H=.8,this.P=1,this.F=o,this.j=new w,this.N=0,this.X=A,this.children=[],this.G=1,B.push(this)}update(){const t=this.parent;if(t)return this.I=this.U.multiply(d(t.q(),1)).rotate(-t.angle).add(t.I),void(this.angle=t.q()*this.K+t.angle);this.j.x=h(this.j.x,-1,1),this.j.y=h(this.j.y,-1,1);const s=this.I.h();if(this.I.x+=this.j.x=this.O*this.j.x,this.I.y+=this.j.y=this.O*this.j.y+0*this.P,this.angle+=this.N*=this.L,!this.D)return;const o=this.j.y<0;if(this.V){const t=this.V.j?this.V.j.x:0;this.j.x=t+(this.j.x-t)*this.H,this.V=0}if(this.A){const t=.001;for(const h of T){if(!this.J&!h.J||h.C||h.parent||h==this)continue;if(!c(this.I,this.size,h.I,h.size))continue;if(!this.Z(h)|!h.Z(this))continue;if(c(s,this.size,h.I,h.size)){const t=s.o(h.I),i=t.length(),e=.001,n=i<.01?a(e):t.scale(e/i);this.j=this.j.add(n),h.D&&(h.j=h.j.o(n));continue}const u=this.size.add(h.size),l=2*(s.y-h.I.y)>u.y+0,f=2*i(s.y-h.I.y)<u.y,d=2*i(s.x-h.I.x)<u.x;if(l||d||!f)if(this.I.y=h.I.y+(u.y/2+t)*n(s.y-h.I.y),h.V&&o||!h.D)o&&(this.V=h),this.j.y*=-this.Y;else if(h.D){const t=(this.D*this.j.y+h.D*h.j.y)/(this.D+h.D),i=this.j.y*(this.D-h.D)/(this.D+h.D)+2*h.j.y*h.D/(this.D+h.D),s=h.j.y*(h.D-this.D)/(this.D+h.D)+2*this.j.y*this.D/(this.D+h.D),n=e(this.Y,h.Y);this.j.y=r(n,t,i),h.j.y=r(n,t,s)}if(!l&&(f||!d))if(this.I.x=h.I.x+(u.x/2+t)*n(s.x-h.I.x),h.D){const t=(this.D*this.j.x+h.D*h.j.x)/(this.D+h.D),i=this.j.x*(this.D-h.D)/(this.D+h.D)+2*h.j.x*h.D/(this.D+h.D),s=h.j.x*(h.D-this.D)/(this.D+h.D)+2*this.j.x*this.D/(this.D+h.D),n=e(this.Y,h.Y);this.j.x=r(n,t,i),h.j.x=r(n,t,s)}else this.j.x*=-this.Y}}if(this.G&&St(this.I,this.size,this)&&!St(s,this.size,this)){const t=St(new w(s.x,this.I.y),this.size,this),i=St(new w(this.I.x,s.y),this.size,this);if(t||!i){this.V=o,this.j.y*=-this.Y;const t=(s.y-this.size.y/2|0)-(s.y-this.size.y/2);t<0&&t>this.O*this.j.y+0*this.P&&(this.j.y=this.O?(t-0*this.P)/this.O:0),this.I.y=s.y}i&&(this.I.x=s.x,this.j.x*=-this.Y)}}_(){N(this.I,this.tt||this.size,this.W,this.$,this.color,this.angle,this.it,this.st)}destroy(){if(!this.C){this.C=1,this.parent&&this.parent.removeChild(this);for(const t of this.children)t.destroy(t.parent=0)}}et(t,i){return t>0}nt(t,i){return t>0}Z(t){return 1}ht(){return A-this.X}ot(t){this.D&&(this.j=this.j.add(t))}rt(t){this.ot(t.scale(1/this.D))}q(){return this.it?-1:1}ct(t=0,i=0,s=1){this.A=t,this.J=i,this.G=s}toString(){let t="type = "+this.constructor.name;return(this.I.x||this.I.y)&&(t+="\npos = "+this.I),(this.j.x||this.j.y)&&(t+="\nvelocity = "+this.j),(this.size.x||this.size.y)&&(t+="\nsize = "+this.size),this.angle&&(t+="\nangle = "+this.angle.toFixed(3)),this.color&&(t+="\ncolor = "+this.color),t}}const O=new Image;let L,Y,H,P,F=d();const j=t=>t.o(y).multiply(d(M,-M)).add(F.scale(.5)).o(d(.5));function N(t,i=d(1),s=-1,e=b,n=new p,h=0,o,r=new p(0,0,0,0),c=0){!function(t,i,s,e,n,h=Y){t=j(t),i=i.scale(M),h.save(),h.translate(t.x+.5|0,t.y+.5|0),h.rotate(s),h.scale(e?-i.x:i.x,i.y),n(h),h.restore()}(t,i,h,o,t=>{if(s<0)t.fillStyle=n,t.fillRect(-.5,-.5,1,1);else{const i=x.x/e.x|0,h=s%i*e.x+.3,o=(s/i|0)*e.y+.3,r=e.x-.6,c=e.y-.6;t.globalAlpha=n.a,t.drawImage(O,h,o,r,c,-.5,-.5,1,1)}})}function X(t,i,s,e,n){N(t,i,-1,b,s,e,0,0,n)}function G(t,i,s=.1,e,n=0){const h=d((i.x-t.x)/2,(i.y-t.y)/2),o=d(s,2*h.length());X(t.add(h),o,e,h.angle(),n)}function U(t,i=0){Y.globalCompositeOperation=t?"lighter":"source-over"}function q(t,i,s=1,e=new p,n=0,h=new p(0,0,0),o="center",r=S){P.fillStyle=e,P.lineWidth=n,P.strokeStyle=h,P.textAlign=o,P.font=s+"px "+r,P.textBaseline="middle",P.lineJoin="round",i=i.h(),(t+"").split("\n").forEach(t=>{n&&P.strokeText(t,i.x,i.y),P.fillText(t,i.x,i.y),i.y+=s})}const K=(t,i=0)=>tt[i]&&2&tt[i][t]?1:0,V=K;let Q=d(),J=d(),Z=0,_=0,tt=[[]];function it(){document.hasFocus()||(tt=[[]]),Q=J.add(d(.5)).o(F.scale(.5)).multiply(d(1/M,-1/M)).add(y)}function st(){for(const t of tt)for(const i in t)t[i]&=1;Z=0}onkeydown=t=>{t.repeat||(tt[_=0][et(t.keyCode)]=3)},onkeyup=t=>{tt[0][et(t.keyCode)]=4};const et=t=>87==t?38:83==t?40:65==t?37:68==t?39:t;onmousedown=t=>{tt[_=0][t.button]=3,onmousemove(t),t.button&&t.preventDefault()},onmouseup=t=>tt[0][t.button]=2&tt[0][t.button]|4,onmousemove=t=>J=nt(t),onwheel=t=>t.ctrlKey||(Z=n(t.deltaY)),oncontextmenu=t=>0;const nt=t=>{if(!L)return d();const i=L.getBoundingClientRect();return d(L.width,L.height).multiply(d(o(t.x,i.left,i.right),o(t.y,i.top,i.bottom)))},ht=void 0!==window.ontouchstart;if(ht){let t,i;ontouchstart=ontouchmove=ontouchend=s=>{s.button=0;const e=s.touches.length;return e?(i||lt(0,i=1),s.x=s.touches[0].clientX,s.y=s.touches[0].clientY,t?onmousemove(s):onmousedown(s)):t&&onmouseup(s),t=e,!s.cancelable}}class ot{constructor(t,i=30,s=.7){this.range=i,this.ut=s,this.lt=t[1]||0,t[1]=0,this.ft=ft(...t)}play(t,i=1,s=1,e=1){let n=0;if(t){const s=this.range;if(s){const e=y.m(t);if(e>s*s)return;i*=o(e**.5,s,s*this.ut)}n=2*j(t).x/L.width-1}const h=s+s*this.lt*e*u(-1,1);return ut([this.ft],i,h,n)}dt(t,i,s=1){return this.play(i,s,2**(t/12),0)}}class rt{constructor(t){this.ft=function(t,i,s,e=125){let n,h,o,r,c,u,l,a,f,d,w,p,g,m,S=0,b=[],v=[],y=[],M=0,z=0,x=1,k={},B=at/e*60>>2;for(;x;M++)b=[x=a=p=0],s.forEach((e,T)=>{for(l=i[e][M]||[0,0,0],x|=!!i[e][M],m=p+(i[e][0].length-2-!a)*B,g=T==s.length-1,h=2,r=p;h<l.length+g;a=++h){for(c=l[h],f=h==l.length+g-1&&g||d!=(l[0]||0)|c|0,o=0;o<B&&a;o++>B-99&&f?w+=(w<1)/99:0)u=(1-w)*b[S++]/2||0,v[r]=(v[r]||0)-u*z+u,y[r]=(y[r++]||0)+u*z+u;c&&(w=c%1,z=l[1]||0,(c|=0)&&(b=k[[d=l[S=0]||0,c]]=k[[d,c]]||(n=[...t[d]],n[2]*=2**((c-12)/12),c>0?ft(...n):[])))}p=m});return[v,y]}(...t)}play(t=1,i=1){return this.source=ut(this.ft,t,1,0,i),this.source}wt(t){this.source&&this.source.gt&&(this.source.gt.gain.value=.5*t)}}let ct;function ut(t,i=1,s=1,e=0,n=0){ct||(ct=new(window.AudioContext||webkitAudioContext)),ct.resume();const o=ct.createBuffer(t.length,t[0].length,at),r=ct.createBufferSource();t.forEach((t,i)=>o.getChannelData(i).set(t)),r.buffer=o,r.playbackRate.value=s,r.loop=n;const c=ct.createGain();return c.gain.value=.5*i,c.connect(ct.destination),(window.StereoPannerNode?r.connect(new StereoPannerNode(ct,{pan:h(e,-1,1)})):r).connect(c),r.start(),r.gt=c,r}const lt=(...t)=>ut([ft(...t)]),at=44100;function ft(h=1,o=.05,r=220,c=0,l=0,a=.1,f=0,d=1,w=0,p=0,g=0,m=0,S=0,b=0,v=0,y=0,M=0,z=1,x=0,k=0){let B,T,R=2*t,A=w*=500*R/at/at,C=[],I=r*=(1+o*u(-1,1))*R/at,W=0,$=0,E=0,D=1,O=0,L=0,Y=0;for(p*=500*R/at**3,v*=R/at,g*=R/at,m*=at,S=S*at|0,T=(c=c*at+9)+(x*=at)+(l*=at)+(a*=at)+(M*=at)|0;E<T;C[E++]=Y)++L%(100*y|0)||(Y=f?f>1?f>2?f>3?Math.sin((W%R)**3):e(s(Math.tan(W),1),-1):1-(2*W/R%2+2)%2:1-4*i(Math.round(W/R)-W/R):Math.sin(W),Y=(S?1-k+k*Math.sin(R*E/S):1)*n(Y)*i(Y)**d*h*.5*(E<c?E/c:E<c+x?1-(E-c)/x*(1-z):E<c+x+l?z:E<T-M?(T-E-M)/a*z:0),Y=M?Y/2+(M>E?0:(E<T-M?1:(T-E)/M)*C[E-M|0]/2):Y),B=(r+=w+=p)*Math.cos(v*$++),W+=B-B*b*(1-1e9*(Math.sin(E)+1)%2),D&&++D>m&&(r+=g,I+=g,D=0),!S||++O%S||(r=I,w=A,D=D||1);return C}let dt=[],wt=d();function pt(t){wt=t,dt=[];for(let t=dt.length=wt.k();t--;)dt[t]=0}const gt=(t,i=0)=>t.B(wt)&&(dt[(0|t.y)*wt.x+t.x|0]=i),mt=t=>t.B(wt)?dt[(0|t.y)*wt.x+t.x|0]:0;function St(t,i=d(),n){const h=e(t.x-i.x/2|0,0),o=e(t.y-i.y/2|0,0),r=s(t.x+i.x/2,wt.x),c=s(t.y+i.y/2,wt.y);for(let t=o;t<c;++t)for(let i=h;i<r;++i){const s=dt[t*wt.x+i];if(s&&(!n||n.et(s,new w(i,t))))return 1}}class bt extends D{constructor(i,s,e=0,n=0,h=100,o=t,r=-1,c=b,u=new p,l=new p,a=new p(1,1,1,0),f=new p(1,1,1,0),d=.5,g=.1,m=1,S=.1,v=.05,y=1,M=1,z=0,x=t,k=.1,B=.2,T,R,A=1,C=(R?1e9:0)){super(i,new w,r,c,s,void 0,C),this.St=e,this.bt=n,this.vt=h,this.yt=o,this.Mt=u,this.zt=l,this.xt=a,this.kt=f,this.Bt=A,this.Tt=d,this.Rt=g,this.At=m,this.speed=S,this.Ct=v,this.O=y,this.L=M,this.P=z,this.It=x,this.Wt=k,this.lt=B,this.G=T,this.$t=R,this.Et=0}update(){if(this.parent&&super.update(),!this.bt||this.ht()<=this.bt){if(1*this.vt){const t=1/this.vt/1;for(this.Et+=z;this.Et>0;this.Et-=t)this.Dt()}}else this.destroy()}Dt(){const t=null!=this.St.x?new w(u(-.5,.5),u(-.5,.5)).multiply(this.St).rotate(this.angle):((t=1,i=0)=>t>0?a(t*u(i/t,1)**.5):new w)(.5*this.St),i=new vt(this.I.add(t),this.W,this.$,this.angle+u(this.It,-this.It)),s=this.lt,e=t=>t+t*u(s,-s),n=e(this.Tt),h=e(this.Rt),o=e(this.At),r=e(this.speed),c=e(this.Ct)*(2*(0|u(2))-1),l=u(this.yt,-this.yt),d=f(this.Mt,this.zt,this.Bt),p=f(this.xt,this.kt,this.Bt);return i.Ot=d,i.Lt=p.o(d),i.j=(new w).t(this.angle+l,r),i.N=c,i.Yt=n,i.Rt=h,i.Ht=o-h,i.Wt=this.Wt,i.O=this.O,i.L=this.L,i.Y=this.Y,i.H=this.H,i.P=this.P,i.G=this.G,i.$t=this.$t,i.F=this.F,i.it=u()<.5,i.Pt=this.Ft,this.jt&&this.jt(i),i}_(){}}class vt extends D{constructor(t,i,s,e){super(t,new w,i,s,e)}_(){const t=s((A-this.X)/this.Yt,1),i=this.Rt+t*this.Ht,e=new w(i,i),n=this.Wt/2,h=new p(this.Ot.r+t*this.Lt.r,this.Ot.g+t*this.Lt.g,this.Ot.b+t*this.Lt.b,(this.Ot.a+t*this.Lt.a)*(t<n?t/n:t>1-n?(1-t)/n:1));this.$t&&U(1),N(this.I,e,this.W,this.$,h,this.angle,this.it),this.$t&&U(),1==t&&(this.color=h,this.size=e,this.Pt&&this.Pt(this),this.C=1)}}const yt={Nt:{W:0,Xt:1,$:d(16),color:new p(1,.2,.2,1),tt:d(1.25,1.25),size:d(.5,.5),speed:.06,O:.85,Gt:.6,Ut:{qt:.3,Kt:.25,Vt:4,width:.12,alpha:.8}},Qt:{W:7,$:d(16),size:d(.8,.8),offset:.1,Jt:.1,Zt:d(.4,.3),_t:.1},ti:{W:-1,$:d(16),color:new p(.05,.05,.05,1),size:d(.15,.15),speed:12,ii:2,si:{color:new p(.05,.05,.05,.3),width:.12,ei:12,ni:3},hi:{oi:2,ri:.5,rangeMin:4,ci:4,ui:.025}},li:{W:2,$:d(16),color:new p(1,.35,.1,1),tt:d(1.25,1.25),size:d(.72,.72),ai:1.5,fi:2.2,di:new p(1,.35,.1,.5)},wi:{W:-1,$:d(16),size:d(.22,.22),speed:8,ii:5,color:new p(1,.2,0,1),si:{color:new p(1,.35,.1,.4)}},pi:{W:-1,$:d(16),size:d(.22,.22),speed:8,ii:2,color:new p(.3,.85,.15,1),si:{color:new p(.3,.85,.15,.3)}},gi:{W:4,frames:[5,6],$:d(16),color:new p(.9,.2,.2,1),tt:d(3,3),size:d(1.4,1.4),mi:12,ai:1.8,Si:.1,bi:.012,yi:{Mi:1.5,zi:80,xi:{ki:.6,Bi:1.8,interval:.12,Ti:10,Ri:8},Ai:{duration:.2,Ci:.6,Ii:.06,Wi:7,$i:.4},Ei:{interval:.3,Di:6,Oi:6,Li:4,Yi:2,Hi:.7}}}},Mt=t=>"bold "+t+"px Arial,sans-serif",zt={Pi:d(1280,720),Fi:36,font:"'Courier New',Courier,monospace"},xt={ji:60,Ni:8,Xi:.35,Gi:new p(1,1,1,.15),Ui:new p(1,1,1,.3),qi:new p(1,1,1,.45),Ki:new p(.8,.15,.1,.25),Vi:new p(.9,.2,.15,.55),Qi:new p(.85,.15,.1,.7)},kt={width:500,height:18,y:18,padding:2},Bt={Ji:{duration:2.8,Zi:1.8,_i:10,ts:120,letterSpacing:"8px"},title:{ss:80,es:-80,ns:"8px",hs:200,rs:60,cs:90,us:12,ls:new p(1,.35,.25,.9),fs:36},ds:{ws:220,ps:200,gs:40,Ss:20,bs:14,vs:40,ys:60,Ms:"6px",zs:14,xs:145,ks:14,Bs:20,Ts:.1,Rs:.3,As:30,Cs:new p(.35,.9,.35,.6),Is:new p(.5,.5,.6,.55),Ws:new p(.22,.22,.3,.85),$s:new p(.6,1,.6,1),Es:new p(.7,.7,.8,.75),Ds:4,Os:2.5,Ls:400}},Tt={Ys:{St:.1,bt:.3,vt:120,yt:.1,W:-1,$:d(16),Mt:new p(1,.965,.784,1),zt:new p(1,.82,.4,1),xt:new p(1,.549,.259,0),kt:new p(1,.549,.259,0),Tt:.5,Rt:.25,At:.1,speed:.05,Ct:.05,O:.9,L:1,P:0,Hs:0,Wt:.25,lt:0,G:1,$t:1,offset:1},Ps:{St:1,bt:.1,vt:80,yt:3.14,W:-1,$:d(16),Mt:new p(1,.863,.627,1),zt:new p(1,.863,.627,1),xt:new p(.627,.471,.314,0),kt:new p(.627,.471,.314,0),Tt:.25,Rt:.35,At:.1,speed:.4,Ct:.11,O:.75,L:.92,P:.4,Hs:3.14,Wt:.3,lt:.25,G:0,$t:1}},Rt=[[[,0,77,,,.7,2,.41,,,,,,,,.06],[,0,43,.01,,.3,2,,,,,,,,,.02,.01],[,0,170,.003,,.008,,.97,-35,53,,,,,,.1],[.8,0,270,,,.12,3,1.65,-2,,,,,4.5,,.02],[,0,86,,,,,.7,,,,.5,,6.7,1,.05],[,0,41,,.05,.4,2,0,,,9,.01,,,,.08,.02],[,0,2200,,,.04,3,2,,,800,.02,,4.8,,.01,.1],[.3,0,16,,,.3,3]],[[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,22,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,22,,22,,22,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,24,,,,,,,,27,,,,,,,,,,,,,,,,27,,,,24,,,,24,,,,,,,,27,,,,,,,,,,,,,,,,24,,24,,24,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[6,1,,,34,34,34,,,,,,34,34,,,,,34,,,,34,34,,,,,34,,,,34,,,,34,34,34,,,,,,34,,,,,,34,34,,,34,34,,,,,,,,,34,34],[4,1,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,23,23,35,23,23,36,23,23,35,23,23,36,23,23,35,35,23,23,35,23,23,35,23,23,36,23,23,35,23,23,36,36],[5,-1,21,,,19,,,21,,,,,,,,,,21,,,19,,,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,1,24,,,24,,,24,,,,,,,,,,24,,,24,,,24,,,,24.75,24.5,24.26,24.01,24.01,24.01,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,24.5,24.26,24.01,24.01,24.01,24.01,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23,,21,23,,35,,23,,21,23,,35,,35,,23,,21,23,,35,,21,23,,35,,21,23,,,],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,36,34,,33,34,34,36,31,36,34,,31,34,32,,33,36,34,,31,34,34,36,33,36,33,,31,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,21,,19,21,,33,,21,,19,21,,33,,33,,21,,19,21,,33,,21,,19,21,,33,,33,,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29],[2,1,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,],[6,1,,,36,,,,,,36,,36,,,,,,,,36,,,,,,36,,36,,,,,,,,36,,,,,,,,,,,,,,,,36,,,,,,36,,36,,,,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,25,,,25,,,,,,,,25,,,,,,,,25,25,25,25]],[[1,-1,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,19,19,31,19,19,31,19,19,31,19,19,31,19,19,31,31],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,36,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,19,,19,19,31,19,19,31,19,,19,19,31,19,19,31],[2,1,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,,,,,,34,,34,,,,,,,,34,,,,,,34,,34,,,,,,]]],[0,1,1,2,3,4,4]],At=[0,2863311530,2631680,289673540,2692743168,2852126890,3222011952,2897920];function Ct(t,i,s){return t>>>2*(15-(4*i+s))&3}const It=[{Fs:4,js:3,Ns:0,Xs:[0,0,0,0,0,0,0,0,0,0,0,0],Gs:[8.5,5.5],Us:[]},{Fs:4,js:3,Ns:1,Xs:[0,0,0,0,0,0,0,0,0,0,0,0],Gs:[4.5,5.5],Us:[[11.5,5.5],[8.5,8.5],[5.5,8.5]]},{Fs:5,js:3,Ns:2,Xs:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Gs:[10.5,5.5],Us:[[4.5,9.5],[16.5,9.5]]},{Fs:5,js:3,Ns:3,Xs:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Gs:[10.5,5.5],Us:[[16.5,5.5],[4.5,9.5],[16.5,9.5]]}],Wt=[{Fs:7,js:3,Xs:[0,0,0,0,0,0,0,0,4,0,2,0,4,0,0,0,0,3,0,0,0],Gs:[2.5,5.5],Us:[[18.5,5.5],[14.5,9.5],[6.5,9.5],[22.5,9.5],[10.5,5.5]]},{Fs:10,js:6,Xs:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Gs:[6.5,5.5],Us:[],gi:[20.5,12.5]}];function $t(t){const{Fs:i,js:s,Xs:e}=t,{qs:n,Ks:h,w:o,Vs:r}=function(t,i,s){const e=4*t,n=4*i,h=[],o=[];for(let t=0;t<e;t++)o[t]=[];for(let i=0;i<n;i++)for(let r=0;r<e;r++){const c=n-1-i;let u;u=0===i||i===n-1||0===r||r===e-1?2:Ct(At[s[(i/4|0)*t+(r/4|0)]],i%4,r%4),o[r][c]=u,u>=2&&h.push(d(r,c))}return{qs:h,Ks:o,w:e,Vs:n}}(i,s,e);return{width:o,height:r,size:d(o,r),qs:n,Ks:h,Us:(t.Us||[]).map(t=>({I:d(t[0],t[1])})),Qs:d(t.Gs[0],t.Gs[1]),Js:t.gi?d(t.gi[0],t.gi[1]):null}}let Et=0;const Dt=[0,0,0,0,2,3,4,6,7];function Ot(t,i,s,e,n,h){if(n<0||h<0||n>=s||h>=e)return 1;const o=e-1-h;return 0===o||o===e-1||0===n||n===s-1?1:Ct(At[t[(o/4|0)*i+(n/4|0)]],o%4,n%4)>=2}function Lt(t,i,s,e,n,h){for(let o=-1;o<=1;o++)for(let r=-1;r<=1;r++)if(Ot(t,i,s,e,n+r,h+o))return 0;return 1}function Yt(t){Et++;const e=function(t){let i=0|t;return function(){i=i+1831565813|0;let t=Math.imul(i^i>>>15,1|i);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}(7919*Et+31*(t=t||1)),n=t=>e()*t|0,h=s(6+(t/2|0),9),o=s(3+(t/3|0),5),r=4*h,c=4*o,u=[];for(let t=0;t<o;t++)for(let i=0;i<h;i++)u.push(0===i||i===h-1||0===t||t===o-1?0:Dt[n(Dt.length)]);if(h>2&&o>2){let t=0;for(let i=0;i<u.length;i++)if(0!==u[i]&&3!==u[i]){t=1;break}t||(u[h+1+n(h-2)]=Dt[4+n(Dt.length-4)])}let l=2,a=2;for(let t=0;t<50&&(l=2+n(4),a=2+n(3),!Lt(u,h,r,c,l,a));t++);const f=s(2+t,10),d=[];let w=0;for(;d.length<f&&w++<300;){const t=2+n(r-4),s=2+n(c-4);if(i(t-l)+i(s-a)<6)continue;if(!Lt(u,h,r,c,t,s))continue;if(0!==u[((c-1-s)/4|0)*h+(t/4|0)])continue;let e=0;for(const n of d)if(i(n[0]-t)<2&&i(n[1]-s)<2){e=1;break}e||d.push([t+.5,s+.5])}return{Fs:h,js:o,Xs:u,Gs:[l+.5,a+.5],Us:d}}const Ht=new p(.85,.65,.13,1),Pt=new p(.5,1,.3,.6),Ft=new p(1,1,1,1);function jt(i,s,e,n){const h=yt.Qt,o=e+n,r=d(s.y,-s.x),c=i.add(r.scale(h._t)).add(s.scale(o)),u=d(-s.y,s.x),l=s.x<0,a=h.Zt,f=c.add(s.scale(a.x)).add(u.scale(a.y*(l?-1:1)));return{Zs:c,_s:f,angle:-Math.atan2(s.y,s.x)-(l?t:0),it:l}}function Nt(t,i,s,e){const{Zs:n,angle:h,it:o}=jt(t,i,s,e);N(n,yt.Qt.size,yt.Qt.W,yt.Qt.$,new p,h,o)}function Xt(t,i){new Ut(t,i),ns(t,i,0)}class Gt extends D{constructor(t){const i=yt.Nt;super(t.h(),i.size,i.W,i.$,0,i.color),this.speed=yt.Nt.speed*vi.te,this.j=d(0,0),this.Ut=d(1,0),this.D=1,this.O=1,this.P=0,this.ct(1,1,1)}update(){super.update();const t=.5*this.size.x,i=.5*this.size.y;this.I.x=h(this.I.x,t,Di.x-t),this.I.y=h(this.I.y,i,Di.y-i),this.j=this.j.scale(yt.Nt.O)}get ie(){return.5*yt.Nt.tt.x+yt.Qt.offset}get se(){return this.Ut.length()>.001?this.Ut.normalize():d(1,0)}get ee(){return jt(this.I,this.se,.5*yt.Nt.tt.x,yt.Qt.offset)._s}_(){const t=this.j.length()>.01,i=this.Ut.x<0;N(this.I,yt.Nt.tt,t?yt.Nt.W+(6*A|0)%2*yt.Nt.Xt:yt.Nt.W,yt.Nt.$,new p,0,i),0!==Xi&&2!==Xi&&Nt(this.I,this.se,.5*yt.Nt.tt.x,yt.Qt.offset)}}class Ut extends D{constructor(t,i,s,e,n=1){const h=n?yt.ti:yt.wi;super(t.h(),h.size,h.W,h.$,0,e??h.color??yt.li.color),this.direction=i.normalize(),this.speed=s??(n?yt.ti.speed:h.speed),this.ne=n,this.ii=h.ii??yt.ti.ii,this.O=1,this.P=0,this.ct(1,0,1),this.si={points:[],color:(h.si??yt.ti.si).color},ts.push(this.si)}update(){if(this.ne&&vi.hi){const t=yt.ti.hi;let s=null,e=1/0;const n=[...Li];Yi&&!Yi.C&&n.push(Yi);for(const h of n){if(h.C)continue;const n=h.I.o(this.I),o=n.length();if(o<.01)continue;if(n.v(this.direction)<0)continue;const r=i(n.x*this.direction.y-n.y*this.direction.x)*t.oi+o*t.ri;r<e&&(e=r,s=h)}if(s){const i=s.I.o(this.I),e=i.length(),n=h(1-(e-t.rangeMin)/t.ci,0,1)*t.ui;if(n>0){const t=i.normalize();this.direction=this.direction.add(t.scale(n)).normalize()}}}this.j=this.direction.scale(this.speed*cs*z),super.update(),this.si.points.length>=yt.ti.si.ei&&this.si.points.shift(),this.si.points.push({I:this.I.h(),alpha:1}),this.ii-=z*cs,this.ii<=0&&this.destroy()}_(){const t=-Math.atan2(this.direction.y,this.direction.x);if(this.ne){const i=.3,s=.12;X(this.I,d(i,s),this.color,t);const e=.8*s;X(this.I.add(this.direction.scale(.5*i)),d(e,e),Ht,t)}else{this.he||(this.he=0),this.he+=8*z*cs;const t=.28,i=yt.wi;X(this.I,d(1.6*t),new p(1,.35,.1,.35),this.he),X(this.I,d(t,t),i.color||this.color,this.he)}}destroy(){this.C||super.destroy()}et(t,i){return t>0?(this.destroy(),1):0}Z(t){return this.ne&&t instanceof Zt?(this.destroy(),rs(t.I),os(),t.destroy(),Zi=0):this.ne&&t instanceof ti?(this.destroy(),t.oe(vi.hi?2:1),Zi=0):!this.ne&&t instanceof Gt&&(this.destroy(),rs(t.I),Hi||(new ot([.5,0,474,.03,.22,.19,1,.4,,,-181,.11,.03,,,,,.88,.28,,103]).play(),Hi=1,Ji=1,Wi&&Wi.destroy(),setTimeout(Xi>=0?()=>ds(Xi):ji?()=>{as(Yt(Ni))}:()=>as(Oi),350))),0}}class qt extends Ut{constructor(t,i,s){super(t,i,s??yt.wi.speed,yt.li.color,0),this.re=1/0}update(){if(super.update(),Wi&&2===Xi){const t=this.I.o(Wi.I).length();t<this.re&&(this.re=t)}}destroy(){2===Xi&&this.re<3&&Wi&&!Hi&&Ui++,super.destroy()}}class Kt extends Ut{constructor(t,i,s){const e=yt.pi;super(t,i,s??e.speed,e.color,0),this.ce=1,this.ue=3*this.I.x}_(){this.ue+=.2*cs;const t=Math.atan2(this.direction.y,this.direction.x),i=.06*Math.sin(this.ue),s=.26+i,e=.2-i;X(this.I,d(s,e),this.color,t),X(this.I,d(.5*s,.5*e),Pt,t)}}function Vt(t,s){const e=t.size,n=t.I.add(s);if(!St(n,e))return t.I=n,1;if(i(s.x)>1e-4){const i=d(t.I.x+s.x,t.I.y);if(!St(i,e))return t.I=i,1}if(i(s.y)>1e-4){const i=d(t.I.x,t.I.y+s.y);if(!St(i,e))return t.I=i,1}return 0}const Qt=[d(1,0),d(-1,0),d(0,1),d(0,-1),d(1,1),d(-1,1),d(1,-1),d(-1,-1)];function Jt(t,i){const s=0|t.x,e=0|t.y,n=0|i.x,h=0|i.y,o=0|wt.x,r=0|wt.y;if(s===n&&e===h)return null;const c=new Uint8Array(o*r),u=[];c[e*o+s]=1;for(const t of Qt){const i=s+t.x,l=e+t.y;if(i<0||i>=o||l<0||l>=r)continue;const a=l*o+i;if(!c[a]){if(0!==t.x&&0!==t.y){if(mt(d(s+t.x,e))>0)continue;if(mt(d(s,e+t.y))>0)continue}if(!(mt(d(i,l))>0)){if(c[a]=1,i===n&&l===h)return d(i+.5,l+.5);u.push({x:i,y:l,le:i,ae:l})}}}let l=0;for(;l<u.length;){const t=u[l++];for(const i of Qt){const s=t.x+i.x,e=t.y+i.y;if(s<0||s>=o||e<0||e>=r)continue;const l=e*o+s;if(!c[l]){if(0!==i.x&&0!==i.y){if(mt(d(t.x+i.x,t.y))>0)continue;if(mt(d(t.x,t.y+i.y))>0)continue}if(!(mt(d(s,e))>0)){if(c[l]=1,s===n&&e===h)return d(t.le+.5,t.ae+.5);u.push({x:s,y:e,le:t.le,ae:t.ae})}}}}return null}class Zt extends D{constructor(t){const i=yt.li;super(t.h(),i.size,i.W,i.$,0,i.color),this.fe=i.ai,this.de=this.fe,this.D=0,this.O=1,this.P=0,this.ct(1,1,1),this.we=null,this.pe=0,this.ge=0}_(){const t=Wi&&Wi.I.x<this.I.x;N(this.I,yt.li.tt,Fi?yt.li.W+(4*A|0)%2:yt.li.W,yt.li.$,new p,0,t),Wi&&Nt(this.I,this.se,.5*yt.li.tt.x,yt.Qt.Jt)}get se(){if(!Wi)return d(1,0);const t=Wi.I.o(this.I);return t.length()>.001?t.normalize():d(1,0)}get ee(){return jt(this.I,this.se,.5*yt.li.tt.x,yt.Qt.Jt)._s}update(){if(!Wi)return;{const t=Wi.I.o(this.I).length();if(this.pe-=z*cs,this.pe<=0&&(this.pe=.35,this.we=t>1.2?Jt(this.I,Wi.I):null),this.we&&t>1.2){const t=this.we.o(this.I);t.length()<.15?(this.pe=0,this.ge=0):Vt(this,t.normalize().scale(.035*cs))?this.ge=0:(this.ge++,this.pe=0,this.ge>2&&Vt(this,d(.5+(0|this.I.x),.5+(0|this.I.y)).o(this.I).scale(.15)))}}if(this.de-=z*cs,this.de>0)return;this.de=this.fe;const t=Wi.I.o(this.I);if(t.length()<=.001)return;const i=t.normalize(),s=this.ee;new qt(s,i,this.me),ns(s,i),hs(.7)}}class _t extends Zt{constructor(t){super(t),this.de=1/0}update(){}_(){const t=Wi&&Wi.I.x<this.I.x;N(this.I,yt.li.tt,Fi?yt.li.W+(4*A|0)%2:yt.li.W,yt.li.$,new p,0,t)}}class ti extends D{constructor(t){const i=yt.gi;super(t.h(),i.size,i.W,i.$,0,i.color),this.mi=i.mi,this.Se=i.mi,this.D=0,this.O=1,this.P=0,this.ct(1,1,1),this.be=i.ai,this.ve=this.be,this.ye=-1,this.Me=0,this.ze=0,this.xe=0,this.ke=0,this.Be=null,this.Te=d(),this.Re=0,this.Ae=0,this.Ce=t.h(),this.we=null,this.pe=0,this.ge=0}_(){let t;t=1===this.ye?yt.gi.W:2===this.ye?yt.gi.frames[1]:yt.gi.frames[0];const i=Wi&&Wi.I.x<this.I.x,s=yt.gi.tt;let e,n;if(Fi){const t=.12*Math.sin(9*A);e=d(s.x-t,s.y+t),n=d(this.I.x,this.I.y+.5*t)}else e=s,n=this.I;N(n,e,t,yt.gi.$,this.color,0,i)}get Ie(){return 1-this.mi/this.Se}get We(){return 1+this.Ie*yt.gi.yi.Mi}$e(){return this.be/this.We}oe(t){this.mi=e(0,this.mi-t),rs(this.I),os(),this.color=Ft,setTimeout(()=>{this.C||(this.color=yt.gi.color)},yt.gi.yi.zi),this.mi<=0&&this.Ee()}Ee(){rs(this.I),os(),this.destroy()}De(){let t;do{t=l(3)}while(t===this.ye);if(this.ye=t,this.ze=0,0===t){const t=Wi?Wi.I.o(this.I).normalize():d(1,0);this.Oe=t.rotate(-yt.gi.yi.xi.ki),this.ke=0,this.Me=0}else 1===t?(Wi&&(this.Be=Wi.I.h(),this.Te=Wi.I.o(this.I).normalize()),this.Me=0):(this.Re=0,this.Ae=0,this.Me=0)}update(){if(!Wi||this.C)return;const t=z*cs;if(this.pe-=t,this.pe<=0){this.pe=.35;const t=Wi.I.o(this.I).length();this.we=t>1.2?Jt(this.I,Wi.I):null}if(this.we){const t=this.we.o(this.I);t.length()<.15?(this.pe=0,this.ge=0):Vt(this,t.normalize().scale(yt.gi.bi*cs))?this.ge=0:(this.ge++,this.pe=0,this.ge>2&&Vt(this,d(.5+(0|this.I.x),.5+(0|this.I.y)).o(this.I).scale(.1)))}if(this.Ce=this.I.h(),this.ye<0)return this.ve-=t,void(this.ve<=0&&(this.De(),this.ve=this.$e()));if(0===this.ye){this.Me+=t;const i=yt.gi.yi.xi,s=i.interval/this.We,e=i.Ti+this.Ie*i.Ri|0;if(this.Me>=s&&this.ke<e){this.Me-=s,this.ke++;const t=this.Oe.rotate(this.ke/e*i.Bi);new Kt(this.I,t),ns(this.I,t),hs(.65)}this.ke>=e&&(this.ye=-1,this.ve=this.$e())}else if(1===this.ye){this.Me+=t;const i=yt.gi.yi.Ai;if(0===this.ze){if(Vt(this,this.Te.scale(yt.gi.Si*this.We*cs)),this.Me>i.duration||this.I.o(this.Be).length()<1){this.ze=1;const t=Wi.I.o(this.I).normalize(),s=(i.Wi-1)/2;for(let e=-s;e<=s;e++){const s=t.rotate(e*i.$i);new Kt(this.I,s),ns(this.I,s)}hs(.7),this.Me=0}}else{const t=this.Ce.o(this.I);t.length()>.2&&Vt(this,t.normalize().scale(i.Ii*cs)),this.Me>i.Ci&&(this.ye=-1,this.ve=this.$e())}}else if(2===this.ye){this.Me+=t;const i=yt.gi.yi.Ei,s=i.interval/this.We,e=i.Di+this.Ie*i.Oi|0;if(this.Re+=t,this.Re>=s&&this.Ae<e){this.Re-=s,this.Ae++;const t=u(2,Di.y-2),e=u(i.Li,i.Li+i.Yi),n=d(1,u(-.5,.5)*i.Hi),h=d(2,t);new Kt(h,n,e);const o=u(2,Di.y-2),r=d(-1,u(-.5,.5)*i.Hi),c=d(Di.x-2,o);new Kt(c,r,e),ns(h,n),ns(c,r),hs(.65)}this.Ae>=e&&(this.ye=-1,this.ve=this.$e())}}}let ii=0,si=d(),ei=d(),ni=d(),hi=0,oi=0,ri=d(),ci=d(),ui=d(),li=0,ai=-1,fi=-1,di=0;function wi(t){const i=t.o(si),s=i.length();s>xt.Ni?(ni=i.normalize(),hi=h((s-xt.Ni)/(xt.ji-xt.Ni),0,1)):(ni=d(),hi=0),ei=si.add(s>.001?i.normalize(Math.min(s,xt.ji)):d())}function pi(t){const i=t.o(ri),s=i.length();s>xt.Ni?(ui=i.normalize(),li=h((s-xt.Ni)/(xt.ji-xt.Ni),0,1)):(ui=d(),li=0),ci=ri.add(s>.001?i.normalize(Math.min(s,xt.ji)):d())}function gi(){ii=0,hi=0,ai=-1,oi=0,li=0,fi=-1,di=0,Zi=0,is=0,ss=0}const mi="QUICKSILVER",Si=[[{ic:"+",Le:"-20% Reload",apply(){vi.Ye*=.8}},{ic:">",Le:"+10% Speed",apply(){vi.te*=1.1}},{ic:"@",Le:"-3% Slow-mo",apply(){vi.He-=.03}}],[{ic:"*",Le:"Homing Bullets",apply(){vi.hi=1}},{ic:"#",Le:"Buckshot",apply(){vi.Pe=1}},{ic:"!",Le:"Triple Burst",apply(){vi.Fe=1}}]],bi={te:1,Ye:1,He:0,hi:0,Pe:0,Fe:0};let vi={...bi};function yi(){return 1*vi.Ye}let Mi,zi=[],xi=-1,ki=0;function Bi(t){const i=Si[t];if(!i)return;const s=[...i].sort(()=>Math.random()-.5);zi=s.slice(0,3),xi=-1}function Ti(){const t=Bt.ds,i=F.x/2,s=F.y/2;return{je:t.ws,Ne:t.ps,gap:t.gs,Xe:i-(zi.length*t.ws+(zi.length-1)*t.gs)/2,Ge:s-t.ps/2+t.Ss,cx:i,cy:s}}function Ri(t,i){if(xi>=0||!zi.length)return;const{je:s,Ne:e,gap:n,Xe:h,Ge:o}=Ti();for(let r=0;r<zi.length;r++){const c=h+r*(s+n);if(t>=c&&t<=c+s&&i>=o&&i<=o+e)return void Ai(r)}}function Ai(t){xi>=0||(xi=t,zi[t].apply(),setTimeout(()=>{us="playing",ls=0,as(ki)},Bt.ds.Ls))}function Ci(t,i,s,e,n,h){t.beginPath(),t.arc(i.x,i.y,xt.ji,0,7),t.fillStyle=""+e,t.fill(),t.lineWidth=2,t.strokeStyle=""+n,t.stroke(),t.beginPath(),t.arc(s.x,s.y,xt.ji*xt.Xi,0,7),t.fillStyle=""+h,t.fill()}!function(){const t=["click","touchstart","touchend","keydown"];function i(){ct||(ct=new(window.AudioContext||webkitAudioContext)),"suspended"===ct.state&&ct.resume();try{const t=ct.createBuffer(1,1,22050),i=ct.createBufferSource();i.buffer=t,i.connect(ct.destination),i.start()}catch(t){}"running"===ct.state&&t.forEach(t=>document.removeEventListener(t,i,1))}t.forEach(t=>document.addEventListener(t,i,1))}();let Ii,Wi,$i=.3,Ei=d(1,1),Di=d(1,1),Oi=0,Li=[],Yi=null,Hi=0,Pi=0,Fi=0,ji=0,Ni=1,Xi=-1,Gi=0,Ui=0,qi=0,Ki=0,Vi=0,Qi=0,Ji=0,Zi=0,_i=new class{constructor(t){this.time=null==t?void 0:A+t,this.setTime=t}set(t=0){this.time=A+t,this.setTime=t}Ue(){this.time=void 0}qe(){return null!=this.time}active(){return A<=this.time}Ke(){return A>this.time}get(){return this.qe()?A-this.time:0}},ts=[],is=0,ss=0,es=d();function ns(t,i,s){const e=Tt.Ys,n=s??e.offset,h=i&&i.length()>.001?i.normalize():d(1,0),o=t.add(h.scale(n));new bt(o,h.angle(),e.St,e.bt,e.vt,e.yt,e.W,e.$,e.Mt,e.zt,e.xt,e.kt,e.Tt,e.Rt,e.At,e.speed,e.Ct,e.O,e.L,e.P,e.Hs,e.Wt,e.lt,e.G,e.$t)}function hs(t=1){const i=r(h(cs,.18,1),.65,1);new ot([2,.03,340,,,.13,1,.5,-7,-19.2,,,.06,,,,.15,.8,.05,,500]).play(void 0,t,i,1)}function os(){new ot([.02,2,277,,.11,.2,1,,.1,,2050,.08,1,,,,.07,2,.03]).play()}function rs(t){const i=Tt.Ps;new bt(t.h(),0,i.St,i.bt,i.vt,i.yt,i.W,i.$,i.Mt,i.zt,i.xt,i.kt,i.Tt,i.Rt,i.At,i.speed,i.Ct,i.O,i.L,i.P,i.Hs,i.Wt,i.lt,i.G,i.$t)}let cs=1,us="intro",ls=0;function as(t){"object"==typeof t&&null!==t?Ii=$t(t):(Oi=0|h(t,0,Wt.length-1),Ii=$t(Wt[Oi])),E(),Ei=d(Ii.width,Ii.height),Di=Ii.size.h(),pt(Ei);for(const t of Ii.qs)gt(t,1);Wi=new Gt(Ii.Qs),y=Wi.I.h(),Li=Ii.Us.map(t=>new Zt(t.I)),Yi=null,Ii.Js&&(Yi=new ti(Ii.Js)),gi(),ts=[],cs=1,Zi=0,is=0,ss=0,Hi=0,Pi=0,_i.Ue()}const fs=["Left stick to move","Right stick to aim\nRelease to fire","Time moves only when you move","Destroy Goons"];function ds(t){Xi=t,Gi=0,Ui=0,qi=0===t||2===t,Ki=0,Qi=0,Ji=0,Vi=1;const i=$t(It[t]);E(),Ei=d(i.width,i.height),Di=i.size.h(),pt(Ei);for(const t of i.qs)gt(t,1);if(Wi=new Gt(i.Qs),y=Wi.I.h(),Li=i.Us.map(1===t?t=>new _t(t.I):t=>new Zt(t.I)),2===t)for(const t of Li)t.we=null,t.pe=1/0,t.fe=yt.li.ai/1.5,t.de=0;Yi=null,Ii=i,gi(),ts=[],cs=1,Zi=0,is=0,ss=0,Hi=0,Pi=0,_i.Ue()}function ws(){const t=Xi+1;t<It.length?ds(t):(Xi=-1,qi=0,ki=0,Bi(0),us="powerup",ls=0)}function ps(){us="playing",ls=0,vi={...bi},ji=0,Ni=1,ds(0),Mi&&Mi.play()}!function(i,n,o,c,u,l){O.onerror=O.onload=()=>{k=d(.3).u(x=d(O.width,O.height)),document.body.style="margin:0;overflow:hidden;background:#000;touch-action:none;user-select:none;-webkit-user-select:none;-moz-user-select:none",document.body.appendChild(L=document.createElement("canvas")),Y=L.getContext("2d"),L.style=W,document.body.appendChild(H=document.createElement("canvas")),P=H.getContext("2d"),H.style=W,async function(){m=zt.Pi,M=zt.Fi,S=zt.font,function(){const t=t=>{const i=L.getBoundingClientRect();return d((t.clientX-i.left)*L.width/i.width,(t.clientY-i.top)*L.height/i.height)},i=t=>t.x>.5*F.x;document.addEventListener("touchstart",s=>{if("title"!==us)if("powerup"!==us){if("playing"===us)for(const e of s.changedTouches){const s=t(e);i(s)&&fi<0?(fi=e.identifier,oi=1,ri=s,ci=s,ui=d(),li=0):!i(s)&&ai<0&&(ai=e.identifier,ii=1,si=s,ei=s,ni=d(),hi=0)}}else for(const i of s.changedTouches){const s=t(i);Ri(s.x,s.y)}else ps()},{passive:1}),document.addEventListener("touchmove",i=>{for(const s of i.changedTouches)s.identifier===ai&&wi(t(s)),s.identifier===fi&&pi(t(s))},{passive:1}),document.addEventListener("touchend",t=>{for(const i of t.changedTouches)i.identifier===ai&&(ai=-1,ii=0,hi=0),i.identifier===fi&&(li>0&&(di=1),fi=-1,oi=0,li=0)},{passive:1}),document.addEventListener("touchcancel",t=>{for(const i of t.changedTouches)i.identifier===ai&&(ai=-1,ii=0,hi=0),i.identifier===fi&&(fi=-1,oi=0,li=0)},{passive:1})}(),Mi=new rt(Rt)}(),a()};const a=(i=0)=>{let c=i-C;C=i,I=s(I+1*c,50),H.width=L.width=s(innerWidth,g.x),H.height=L.height=s(innerHeight,g.y),F=d(L.width,L.height);let u=0;for(I<0&&I>-9&&(u=I,I=0);I>=0;I-=1e3/60)it(),n(),$(),o(),st();I+=u,F=d(L.width,L.height),Y.imageSmoothingEnabled=0,function(){if("playing"!==us)return;const t=Ii.Ks;for(let i=0;i<Ei.x;i++)for(let s=0;s<Ei.y;s++)N(d(i+.5,s+.5),d(1),t[i][s]+8,d(16));if(Wi&&0!==Xi&&2!==Xi){const t=yt.Nt.Ut,i=Wi.se,s=Wi.ee;let e=0;for(;e<t.Vt;)G(s.add(i.scale(e)),s.add(i.scale(Math.min(e+t.qt,t.Vt))),t.width,yt.Nt.color.scale(1,(1-e/t.Vt)*t.alpha)),e+=t.qt+t.Kt}if(!Wi)return;for(const t of Li){const i=Wi.I.o(t.I);i.length()<=.001||G(t.I,t.I.add(i.normalize(yt.li.fi)),yt.li.di)}const i=yt.ti.si.width,s=yt.ti.si.ni;for(let t=ts.length-1;t>=0;t--){const e=ts[t];let n=0;for(let t=1;t<e.points.length;t++){const s=e.points[t];s.alpha<=0||(n=1,G(e.points[t-1].I,s.I,i,e.color.scale(1,s.alpha)))}for(const t of e.points)t.alpha-=z*s;n||ts.splice(t,1)}}(),B.sort((t,i)=>t.F-i.F);for(const t of B)t.C||t._();"intro"!==us?"title"!==us?"powerup"!==us?function(){const t=P;if(Zi>0&&Wi){const i=h(1-Zi/yi(),0,1),s=F.x/1280,e=300*s,n=20*s,o=20*s,r=20*s;t.fillStyle="rgba(255,255,255,0.15)",t.fillRect(o,r,e,n),t.fillStyle=`rgba(${i<.5?255:Math.round(255*(1-i))},${i<.5?Math.round(200*i*2):200},60,0.8)`,t.fillRect(o,r,e*i,n),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=1,t.strokeRect(o,r,e,n),t.save(),t.font=Mt(18*s),t.textAlign="left",t.textBaseline="top",t.fillStyle="rgba(255,255,255,0.85)",t.fillText("RELOAD",o,r+n+4*s),t.restore()}if(Yi&&!Yi.C){const i=kt,s=h(Yi.mi/Yi.Se,0,1),e=i.width,n=i.height,o=(F.x-e)/2,r=i.y;let c,u,l;t.fillStyle="rgba(0,0,0,0.5)",t.fillRect(o-i.padding,r-i.padding,e+2*i.padding,n+2*i.padding),t.fillStyle="rgba(255,255,255,0.1)",t.fillRect(o,r,e,n),s>.5?(c=Math.round(255*(1-2*(s-.5))),u=200,l=0):(c=255,u=Math.round(2*s*200),l=0),t.fillStyle=`rgba(${c},${u},${l},0.85)`,t.fillRect(o,r,e*s,n)}{let i="";if(i=Xi>=0?"TUTORIAL":ji?"INFINITE":Yi&&!Yi.C?"BOSS FIGHT":"LEVEL "+(Oi+1),i){const s=F.x/1280;t.save(),t.font=Mt(36*s),t.textAlign="right",t.textBaseline="top",t.fillStyle="rgba(255,255,255,0.75)",t.fillText(i,F.x-20*s,20*s),t.restore()}}if(ii&&Ci(t,si,ei,xt.Gi,xt.Ui,xt.qi),oi&&Ci(t,ri,ci,xt.Ki,xt.Vi,xt.Qi),Xi>=0){const i=.78*F.y,s=F.x/2;let e=fs[Xi],n=Ki;if(e&&n>0){const h=e.split("\n"),o=h.length>1?34:46,r=1.25*o,c=i-(h.length-1)*r*.5;t.save(),t.font=Mt(o),t.textAlign="center",t.textBaseline="middle",t.lineJoin="round";for(let i=0;i<h.length;i++){const e=c+i*r;t.strokeStyle=`rgba(0,0,0,${.85*n})`,t.lineWidth=7,t.strokeText(h[i],s,e),t.fillStyle=`rgba(255,255,255,${n})`,t.fillText(h[i],s,e)}t.restore()}if(0===Xi&&Gi>0){const s=h(Gi,0,1),e=180,o=8,r=(F.x-e)/2,c=i+36;t.fillStyle="rgba(255,255,255,0.15)",t.fillRect(r,c,e,o),t.fillStyle=`rgba(255,255,255,${.7*n})`,t.fillRect(r,c,e*s,o)}if(2===Xi&&Vi&&Qi>0){const s=h(Qi/2.5,0,1),e=180,n=8,o=(F.x-e)/2,r=i+36;t.fillStyle="rgba(255,255,255,0.15)",t.fillRect(o,r,e,n),t.fillStyle="rgba(255,255,255,0.7)",t.fillRect(o,r,e*s,n)}}if(Ji>0){const i=h(Ji,0,1);t.fillStyle=`rgba(255,255,255,${i})`,t.fillRect(0,0,F.x,F.y)}}():function(){const t=P,i=ls,s=Bt.ds,{je:e,Ne:n,gap:o,Xe:r,Ge:c,cx:u}=Ti(),l=h(i/.4,0,1);X(d(0),d(999),new p(.1,.1,.14)),t.save(),t.font=Mt(s.vs),t.textAlign="center",t.textBaseline="middle",t.letterSpacing=s.Ms,t.fillStyle=`rgba(255,255,255,${l})`,t.fillText("UPGRADE",u,s.ys),t.restore();for(let u=0;u<zi.length;u++){const a=zi[u],f=r+u*(e+o),w=xi===u,g=h((i-u*s.Ts)/s.Rs,0,1),m=(1-g)*s.As;t.save(),t.globalAlpha=l*g;const S=J.x,b=J.y;t.fillStyle=w?""+s.Cs:S>=f&&S<=f+e&&b>=c+m&&b<=c+m+n&&xi<0?""+s.Is:""+s.Ws,t.beginPath(),t.roundRect(f,c+m,e,n,s.bs),t.fill(),t.lineWidth=w?s.Ds:s.Os,t.strokeStyle=w?""+s.$s:""+s.Es,t.stroke(),t.restore(),t.save(),t.font=Mt(60),t.textAlign="center",t.textBaseline="middle",t.globalAlpha=l*g,t.fillStyle="rgba(130,255,180,1)",t.fillText(a.ic,f+e/2,c+m+80),t.restore(),t.save(),t.font=Mt(s.zs),t.textAlign="center",t.textBaseline="middle",t.globalAlpha=l*g,t.fillStyle="rgba(220,220,220,1)",t.fillText(a.Le,f+e/2,c+m+s.xs),t.restore(),q(`[${u+1}]`,d(f+e/2,c+m+n-s.Bs),s.ks,new p(.65,.65,.65,l*g*.7))}}():function(){const t=P,i=F.x/2,s=F.y/2,e=ls,n=Bt.title,o=h(e/.5,0,1);X(d(0),d(999),new p(.08,.08,.1)),t.save(),t.letterSpacing=n.ns,q(mi,d(i,s+n.es),n.ss,new p(1,1,1,o)),t.restore();const r=.85+.15*Math.sin(3*e),c=n.hs*r,u=n.rs*r,l=s+n.cs;t.save(),t.globalAlpha=o,t.fillStyle=""+n.ls,t.beginPath(),t.roundRect(i-c/2,l-u/2,c,u,n.us),t.fill(),t.restore(),q("PLAY",d(i,l+2),n.fs,new p(1,1,1,o))}():function(){const i=F.x/2,s=F.y/2,n=ls,o=Bt.Ji;if(X(d(0),d(999),new p(0,0,0)),n<o.Zi){const t=n/o.Zi,e=r(t*t,o._i,o.ts),c=h(2*t,0,1);P.save(),P.letterSpacing=o.letterSpacing,q(mi,d(i,s),e,new p(1,1,1,c)),P.restore()}else{const h=(n-o.Zi)/(o.duration-o.Zi),r=1-h,c=.3*Math.sin(h*t*6)*(1-h);X(d(0),d(999),new p(1,.2,.1,e(0,c))),P.save(),P.letterSpacing=o.letterSpacing,q(mi,d(i,s),o.ts,new p(1,1-.5*h,1-.5*h,r)),P.restore()}}(),requestAnimationFrame(a)};l?O.src=l:O.onload()}(0,function(){if(ls+=z,"intro"===us)return void(ls>=Bt.Ji.duration&&(us="title",ls=0));if("title"===us)return void((V(0)||K(32)||K(13))&&ps());if("powerup"===us)return void function(){if(zi.length&&(V(0)&&xi<0&&Ri(J.x,J.y),xi<0))for(let t=0;t<zi.length;t++)if(K(49+t))return void Ai(t)}();if(Ji>0&&(Ji=e(0,Ji-3.5*z)),Hi||!Wi)return;if(Li=Li.filter(t=>!t.C),Xi>=0&&Ki<1&&(Ki=s(1,Ki+2*z)),!Li.length&&(!Yi||Yi.C)){if(1===Xi||3===Xi)return Pi||(Pi=1,Ji=1,_i.set(.35)),void(_i.Ke()&&ws());if(Xi<0){if(Pi||(Pi=1,Ji=1,_i.set(.6)),_i.Ke())if(Oi===Wt.length-1&&(ji=1),ji){const t=Yt(Ni);Ni++,as(t)}else{const t=Oi+1,i=Oi+1;i<Si.length?(ki=t,Bi(i),us="powerup",ls=0):as(t)}return}}if(!ht&&ai<0&&fi<0&&(V(0)&&(ii=1,si=J.h(),ei=J.h(),ni=d(),hi=0),ii&&((t,i=0)=>tt[i]&&1&tt[i][0]?1:0)()&&wi(J),((t,i=0)=>tt[i]&&4&tt[i][0]?1:0)()&&(ii=0,hi=0)),(K(32)||K(88))&&(di=1),hi>0){const t=d(ni.x,-ni.y).scale(Wi.speed*hi),i=yt.Nt.Gt;Wi.j=Wi.j.scale(i).add(t.scale(1-i))}if(li>0){const t=d(ui.x,-ui.y);t.length()>.001&&(Wi.Ut=t)}const t=Wi.j.length()>.01;if(Fi=t,cs=t?1:e(.02,.05+vi.He),1===Xi&&(cs=1),0===Xi){if(Pi)return void(_i.Ke()&&ws());if(t?Gi+=z:Gi=0,Gi>=1)return Pi=1,Ji=1,void _i.set(.35)}if(2===Xi){for(const t of Li)t.we=null,t.pe=1/0;if(Vi&&(Qi+=z*cs,Qi>=2.5))return Pi||(Pi=1,Ji=1,_i.set(.35)),void(_i.Ke()&&ws())}if(qi&&(di=0),Mi&&($i=r(.05,$i,t?.6:.075),Mi.wt($i)),Zi>0&&(Zi=e(0,Zi-z*cs)),is>0&&(ss-=z*cs,ss<=0&&(ss=.08,is--,Xt(Wi.ee,es),hs())),di&&Zi<=0&&is<=0){Zi=yi();const t=Wi.Ut.length()?Wi.Ut:d(1,0),i=Wi.ee;if(vi.Pe){const s=.21;[t,t.rotate(s),t.rotate(-s)].forEach(t=>Xt(i,t)),hs()}else vi.Fe?(Xt(i,t),hs(),es=t,is=2,ss=.08):(Xt(i,t),hs())}di=0},function(){if("playing"!==us||!Wi)return;y=y.add(Wi.I.o(y).scale(.12));const t=F.x/M*.5,i=F.y/M*.5;y.x=Di.x<=2*t?.5*Di.x:h(y.x,t,Di.x-t),y.y=Di.y<=2*i?.5*Di.y:h(y.y,i,Di.y-i)},0,0,"t.png");